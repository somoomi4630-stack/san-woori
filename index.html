<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì „êµ­ ë“±ì‚° ë™í˜¸íšŒ ê´€ë¦¬</title>
    <style>
        /* ê¸°ì¡´ ìŠ¤íƒ€ì¼ ë™ì¼ + ì¶”ê°€ */
        body { font-family: 'Apple SD Gothic Neo', sans-serif; background-color: #f0f2f5; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .tabs { display: flex; margin-bottom: 20px; border-radius: 8px; overflow: hidden; }
        .tab-btn { flex: 1; padding: 15px; border: none; cursor: pointer; background: #e4e6eb; font-weight: bold; }
        .tab-btn.active { background: #1877f2; color: white; }
        .content { display: none; }
        .content.active { display: block; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { border-bottom: 1px solid #ddd; padding: 12px; text-align: center; }
        .level-badge { background: #f0f2f5; padding: 4px 8px; border-radius: 10px; font-size: 0.85em; font-weight: bold; }
        .admin-lock { text-align: center; padding: 50px; }
        input, select { width: 100%; padding: 10px; margin: 8px 0; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }
        .btn-save { background: #28a745; color: white; border: none; padding: 12px; width: 100%; border-radius: 6px; cursor: pointer; }
    </style>
</head>
<body>

<div class="container">
    <div class="tabs">
        <button class="tab-btn active" onclick="showTab('dashboard')">ğŸ“Š ì‹¤ì‹œê°„ í˜„í™©</button>
        <button class="tab-btn" onclick="showTab('management')">ğŸ” ê´€ë¦¬ì ì„¤ì •</button>
    </div>

    <div id="dashboard" class="content active">
        <h2>ğŸ”ï¸ íšŒì› ë“±ì‚° ë“±ê¸‰í‘œ</h2>
        <div style="text-align: right;">
            <select id="qSelect" onchange="renderUI()" style="width:150px;"></select>
        </div>
        <table id="mainTable">
            <thead>
                <tr><th>íšŒì›ëª…</th><th>ë ˆë²¨(ì´í•©)</th><th>ë¶„ê¸° íšŸìˆ˜</th></tr>
            </thead>
            <tbody id="memberList"></tbody>
        </table>
    </div>

    <div id="management" class="content">
        <div id="lockScreen" class="admin-lock">
            <h3>ê´€ë¦¬ì ì•”í˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”</h3>
            <input type="password" id="adminPw" placeholder="Password">
            <button class="btn-save" onclick="unlockAdmin()" style="margin-top:10px;">ì ‘ì†</button>
        </div>
        
        <div id="adminContent" style="display:none;">
            <h3>ğŸ†• íšŒì› ë“±ë¡</h3>
            <input type="text" id="mName" placeholder="ì´ë¦„">
            <input type="date" id="mDate">
            <button class="btn-save" onclick="apiCall('addMember')">ë“±ë¡í•˜ê¸°</button>

            <hr>
            <h3>ğŸ“… ë“±ì‚° ê¸°ë¡ ì¶”ê°€</h3>
            <select id="mSelect"></select>
            <input type="date" id="hDate">
            <button class="btn-save" style="background:#007bff;" onclick="apiCall('addHike')">ê¸°ë¡ ì €ì¥</button>

            <hr>
            <h3>ğŸ—‘ï¸ íšŒì› ì‚­ì œ</h3>
            <select id="dSelect"></select>
            <button class="btn-save" style="background:#dc3545;" onclick="apiCall('deleteMember')">íšŒì› ì‚­ì œ</button>
        </div>
    </div>
</div>

<script>
    const API_URL = "https://script.google.com/macros/s/AKfycbySsFZxHczWCZUQvm17BL99EIK6gTHDW0kcz8ej50AOd9H7iG8ZKRAw9dPVTaV0TuAz/exec"; 
    const ADMIN_PASSWORD = "1229"; // ì‚¬ìš©í•  ë¹„ë°€ë²ˆí˜¸ ì„¤ì •

    let db = { members: [], hikes: [] };

    async function loadData() {
        // ì‹¤ì œ ìš´ì˜ì‹œì—ëŠ” Google Apps Script ì—°ë™ ë¡œì§ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤.
        // ì—¬ê¸°ì„œëŠ” êµ¬ì¡°ë¥¼ ë³´ì—¬ë“œë¦¬ê¸° ìœ„í•´ LocalStorageë¥¼ ìœ ì§€í•˜ë˜ API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜ì„ í•©ë‹ˆë‹¤.
        const res = await fetch(API_URL + "?action=read");
        const json = await res.json();
        // ... ë°ì´í„° ë§¤í•‘ ë¡œì§
    }

    // ê´€ë¦¬ì ì ê¸ˆ í•´ì œ
    function unlockAdmin() {
        const pw = document.getElementById('adminPw').value;
        if(pw === ADMIN_PASSWORD) {
            document.getElementById('lockScreen').style.display = 'none';
            document.getElementById('adminContent').style.display = 'block';
        } else {
            alert("ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");
        }
    }

    function showTab(id) {
        document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    // ë“±ê¸‰ ë¡œì§ (ìš”ì²­í•˜ì‹  ë³„ë˜¥ë³„, í–‰ì„±ê³„ ë“± ì ìš©)
    function getLevel(n) {
        if (n >= 50) return 'ğŸŒŒ í–‰ì„±ê³„';
        if (n >= 45) return 'ğŸŒ  ë³„ë˜¥ë³„';
        if (n >= 40) return 'ğŸ’« íƒ€ì›ë³„';
        if (n >= 35) return 'ğŸŒŸ ë¹›ë³„';
        if (n >= 30) return 'â­ï¸ ë³„';
        if (n >= 25) return 'ğŸŒ• ë‹¬';
        if (n >= 20) return 'â˜€ï¸ í•´';
        if (n >= 15) return 'ğŸŒˆ ë¬´ì§€ê°œ';
        if (n >= 10) return 'â›°ï¸ ì‚°';
        if (n >= 5)  return 'ğŸŒ³ ë‚˜ë¬´';
        if (n >= 3)  return 'ğŸŒ¿ í’€ì';
        return 'ğŸŒ± ìƒˆì‹¹';
    }

    // ë°ì´í„° ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° ë“±ì˜ í•¨ìˆ˜ë“¤...
</script>
</body>
</html>